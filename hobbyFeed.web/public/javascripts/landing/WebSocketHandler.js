// Generated by CoffeeScript 1.6.3
(function() {
  var SOCKETHANDLER;

  SOCKETHANDLER = (function($) {
    var WebSocketHandler;
    WebSocketHandler = (function() {
      var _self;
      _self = this;
      this.address = "ws://localhost:8888/feed/1234";
      this.input = $('#keyword');
      this.socket = "";
      this.inputButton = $("#submitFeed");
      this.handler = new window.webSocketEventHandler();
      this.openConnection = function() {
        if (!window.WebSocket) {
          window.WebSocket = window.MozWebSocket;
        }
        if (window.WebSocket) {
          this.socket = new WebSocket(this.address);
          this.socket.onmessage = this.onMessageReceived;
          this.socket.onopen = this.onSocketOpen;
          this.socket.onclose = this.onSocketClose;
        } else {
          alert("Your browser does not support Web Socket.");
        }
      };
      this.sendMessage = function() {
        _self.socket.send(_self.input.val());
      };
      this.onMessageReceived = function(event) {
        _self.handler.received(event);
      };
      this.onSocketOpen = function(event) {
        _self.handler.open(event);
      };
      this.onSocketClose = function(event) {
        _self.handler.close(event);
      };
    });
    window.webSocketHandler = WebSocketHandler;
  })(jQuery);

}).call(this);
